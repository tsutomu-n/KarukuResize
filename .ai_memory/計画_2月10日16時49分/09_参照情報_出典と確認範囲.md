# 参照情報: 出典と確認範囲

## 1. リポジトリ内参照（現役コード）

### 1.1 GUI
1. `src/karuku_resizer/gui_app.py`
   - 詳細設定パネルの構築
   - 出力形式/品質/EXIF/GPS/ドライラン/ログ設定
   - EXIF差分プレビュー
   - 単体保存/一括保存導線
   - 設定保存と復元

### 1.2 保存パイプライン
1. `src/karuku_resizer/image_save_pipeline.py`
   - `SaveOptions`, `SaveResult`, `ExifEditValues`
   - `normalize_quality`, `resolve_output_format`
   - `save_image`（EXIFフォールバックを含む）
   - `_apply_exif_edits`

### 1.3 CLI
1. `src/karuku_resizer/resize_core.py`
   - CLI引数
   - ログレベル制御
   - `--dry-run`, `-v`, `-q`, `-f` など

### 1.4 ビルド
1. `src/karuku_resizer/build_exe.py`
   - PyInstaller引数
   - `pillow_avif` hidden import

### 1.5 テスト
1. `tests/test_image_save_pipeline.py`
   - EXIF keep/edit/remove
   - dry-run
   - 品質丸め
2. `tests/test_basic.py`
   - 基本確認

### 1.6 プロジェクト設定
1. `pyproject.toml`
   - エントリポイント
   - 依存関係
   - 開発依存

## 2. セッション内で参照した既存文書
1. `README.md`
2. `docs/QUICK_START.md`
3. `次の実装計画：2月10日11時18分/03_EXIF機能設計_ユーザー視点と技術設計.md`

注記:
- 上記文書のうち、現行コードと齟齬がある箇所はコード優先で解釈した。

## 3. 外部参照（技術確認）

### 3.1 Microsoft WIC
1. https://learn.microsoft.com/ja-jp/windows/win32/wic/-wic-native-image-format-metadata-queries
2. https://learn.microsoft.com/en-us/windows/win32/wic/-wic-photopropsystems
3. https://learn.microsoft.com/en-us/windows/win32/wic/-wic-photoprop-system-photo-datetaken
4. https://learn.microsoft.com/en-us/windows/win32/wic/-wic-photoprop-system-gps-latitude
5. https://learn.microsoft.com/en-us/windows/win32/wic/-wic-codec-metadatahandlers

### 3.2 Pillow（公式・一次情報）
1. https://github.com/python-pillow/pillow/blob/main/docs/handbook/image-file-formats.rst
2. https://github.com/python-pillow/pillow/blob/main/docs/releasenotes/8.3.0.rst
3. https://github.com/python-pillow/pillow/blob/main/docs/releasenotes/9.4.0.rst
4. https://github.com/python-pillow/pillow/blob/main/docs/releasenotes/11.0.0.rst

### 3.3 Context7
1. Library: `/python-pillow/pillow`
2. 確認内容:
   - EXIFの保存引数
   - `getexif()` の扱い
   - 形式別保存オプション

## 4. 未参照・未確定事項
1. すべての形式で同一タグ集合が完全編集可能かどうかの網羅試験。
2. WindowsのメタデータUI（Explorer）表示との完全一致検証。

## 5. この記録の信頼境界
1. コードに存在する機能は「実装済み事実」として記録。
2. 外部ドキュメントは「設計判断の根拠」として記録。
3. 未検証事項は「未確定」に分類し、断定しない。
