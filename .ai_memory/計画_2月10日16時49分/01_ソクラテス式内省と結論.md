# ソクラテス式内省と結論

## 1. 議論の目的
- 実装前に「本当に最良の計画か」を問い直し、設計の迷いを減らす。
- ユーザー要件（事務員でも使える、かつプロ向け編集も可能）を両立させる。

## 2. 議論（Q&A）

### Q1. 目的は「高機能化」か「使いやすさ」か
- 問い: すべてのメタデータ項目を最初から見せることは、ユーザーフレンドリーか。
- 検討:
  - 高機能ではあるが、入力負荷・誤操作・学習コストが急増する。
  - 事務員ユーザーにとっては、まず「迷わず完了できること」が主要価値。
- 結論:
  - 主要目的は「タスク完了の速さと正確さ」。
  - 高機能は「必要時に展開」する設計が妥当。

### Q2. 1画面に集約するか、モード分離するか
- 問い: すべてを同一UIに並べるか、簡易/プロに分けるか。
- 検討:
  - 同一UI集約は実装が単純に見えるが、認知負荷が高い。
  - モード分離は設計の責務が明確で、検証範囲も整理しやすい。
- 結論:
  - 「簡易モード」「プロモード」の2層が最適。

### Q3. メタデータ編集の技術境界はどこか
- 問い: GUIで「あらゆるメタデータ編集」は現実的か。
- 検討:
  - 現行実装は Pillow の `Image.getexif()` と `save(..., exif=...)` を中心に成立。
  - 形式差（JPEG/PNG/WEBP/AVIF）やハンドラ有無で編集可能範囲に差が出る。
  - WIC上でも「ハンドラ未対応メタデータ」は編集不可の概念がある。
- 結論:
  - 初期段階は「編集可能範囲を明示した拡張」が最良。
  - すべてを一度に解決する計画は採用しない。

### Q4. データモデルは現状維持か拡張か
- 問い: `ExifEditValues` を最小追加で続けるか、共通メタデータモデルに拡張するか。
- 検討:
  - 最小追加は短期実装しやすいが、項目追加のたびに分岐が増える。
  - モデル拡張は初期工数が増えるが、今後の拡張で破綻しにくい。
- 結論:
  - 今回は `ExifEditValues` を段階的に拡張し、内部変換を関数分離する。
  - いきなり全面リファクタは行わない。

### Q5. 成功条件は何か
- 問い: 「実装した」ではなく「成功した」と言える条件は何か。
- 検討:
  - UIが表示されるだけでは不十分。
  - 単体保存・一括保存・ドライラン・差分表示・設定永続化まで通る必要がある。
- 結論:
  - 成功条件は、主要ユースケースを網羅した実行テストで定義する。

## 3. 統合結論
1. 実装方針は 2モード（簡易/プロ）で確定する。  
2. 簡易モードを既定値にし、事務員ユーザーの迷いを最小化する。  
3. プロモードでは編集項目をカテゴリ表示し、必要時のみ詳細入力させる。  
4. 現行保存パイプライン（`save_image`）を中心に拡張し、GUIのみで責務を増やさない。  
5. 形式差と書込不可ケースは、UI上で明示して失敗を減らす。  

## 4. この結論から導く記録方針
- 計画書では次を分離して書く:
  - 現状仕様（事実）
  - 実装計画（変更）
  - 検証計画（品質保証）
- すべて「現行コードに存在する責務単位」で分解する。
