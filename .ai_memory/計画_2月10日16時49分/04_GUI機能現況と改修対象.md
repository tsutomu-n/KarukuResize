# GUI機能現況と改修対象

## 1. 現行GUIの機能一覧（現役コード）

### 1.1 基本操作
1. 画像選択（複数）
2. リサイズモード選択
   - 比率 %
   - 幅 px
   - 高さ px
   - 幅×高
3. プレビュー
4. 単体保存
5. 一括保存

### 1.2 詳細設定（折りたたみ）
1. 出力形式:
   - 自動
   - JPEG
   - PNG
   - WEBP（対応環境）
   - AVIF（対応環境）
2. 品質:
   - 5〜100（5刻み）
3. EXIFモード:
   - 保持
   - 編集
   - 削除
4. GPS削除
5. ドライラン
6. 詳細ログ
7. EXIF差分プレビュー

### 1.3 EXIF編集（現状）
1. 撮影者
2. 著作権
3. コメント
4. 撮影日時（`YYYY:MM:DD HH:MM:SS`）

## 2. 現行UI導線の課題（ユーザー視点）
1. 詳細設定が横並びで密集しやすく、初見ユーザーが迷いやすい。
2. EXIF編集が「必要ないユーザー」にも視界に入る。
3. 事務員ユーザーに必要な操作（形式・品質・保存）と、プロ操作が混在している。
4. 実行前に「何が変更されるか」の理解が不足しやすい（差分ダイアログはあるが導線が弱い）。

## 3. 改修対象の整理

### 3.1 最優先: モード分離
1. 簡易モード（初期値）
2. プロモード（明示切替）

### 3.2 簡易モードに残す機能
1. 出力形式
2. 品質（5刻み）
3. EXIF: 保持/削除
4. GPS削除
5. ドライラン
6. 保存/一括保存

### 3.3 プロモードで開放する機能
1. EXIF編集（現4項目 + 拡張項目）
2. EXIF差分詳細表示
3. 詳細ログ
4. 将来のメタデータカテゴリ編集

## 4. 画面構成の提案（実装対象）

### 4.1 ヘッダー部
1. モード切替トグル:
   - `簡易`
   - `プロ`
2. 現在設定の要約ラベル（既存を活用）

### 4.2 設定パネル
1. 簡易モード:
   - 最小項目のみ表示
2. プロモード:
   - 「メタデータ編集」ボタンで別ダイアログ表示
   - または折りたたみセクションでカテゴリ別表示

### 4.3 実行結果パネル
1. 処理結果
2. EXIF付与状態
3. GPS削除有無
4. フォールバック有無

## 5. 設定保存の拡張方針
- 追加予定キー:
  - `ui_mode`（`simple` / `pro`）
  - `pro_panel_expanded`（必要時）
  - 新規メタデータ編集項目（個別キー）
- 互換性:
  - 既存キーは維持
  - 未定義キーはデフォルト値を適用

## 6. 実装時の注意（GUI）
1. モード切替時に入力値を消さない。
2. 無効項目は非表示または disabled を統一する。
3. 一括保存時の編集値はジョブ全体で再利用し、バラつきを防ぐ。
4. 差分表示は実際の `SaveOptions` と一致させる。

## 7. 受け入れ条件（GUI観点）
1. 簡易モードで主要作業が3クリック程度で完了できる。
2. プロモードに切り替えても、既存保存機能が壊れない。
3. 単体保存・一括保存ともモード別設定が正しく反映される。
4. アプリ再起動後にモードと設定が復元される。
