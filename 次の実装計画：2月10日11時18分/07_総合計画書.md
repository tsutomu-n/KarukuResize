# 総合計画書（調査結果 + 計画 + スケジュール）

## 1. 背景
本計画は、KarukuResizeに対して次の機能追加を行うための総合計画。
- 品質指定（5刻み・下限あり）
- 出力形式指定
- ドライラン
- 詳細ログ
- EXIFの keep/edit/remove
- EXIF補助機能（GPS削除、差分、結果確認）

## 2. 今回調査で確定した事実
1. 現行CLIは構文エラーで起動不可
2. 現行GUIは主要リサイズ機能を保持
3. GUIには新要求機能が未実装
4. ドキュメントと実装の整合にズレがある

## 3. 実装の戦略
- サンクコストを切って段階導入
- まずユーザー価値が高く失敗リスクが低い機能を先に実装
- GUIを主軸に先行開発し、CLI修復は別トラック

## 4. 推奨ロードマップ

### Phase 1（最優先）
1. 品質（5..100、5刻み）
2. 形式選択（JPEG/PNG/WEBP/AVIF）
3. ドライラン
4. 詳細ログ
5. EXIF keep/remove
6. GPS削除
7. 保存後結果表示

### Phase 2
1. EXIF edit（限定項目）
2. 保存前差分プレビュー
3. プリセット運用の改善

### Phase 3（任意）
1. 高度な任意タグ編集

## 5. 技術仕様（要点）
1. Pillow API中心
   - `Image.getexif()`
   - `save(exif=...)`
2. 形式別処理
   - JPEG: quality上限95運用
   - PNG: quality→compress_level変換
   - WebP/AVIF: `features.check(...)` で可否判定
3. EXIFエラー方針
   - 処理継続
   - 未適用件数を結果表示

## 6. スケジュール（目安）
- Phase 1: 5〜7日
- Phase 2: 3〜4日

## 7. 成果物
1. 更新済みGUI実装
2. 設定保存対応
3. 動作確認手順
4. 実装整合済みドキュメント

## 8. 判断ポイント（ユーザー決裁用）
1. Phase 1を先行して早期出荷するか
2. Phase 2を連続実装するか
3. CLI修復をいつ挟むか

