# 参照情報と検証ログ

## 1. このセッションで実行した主要確認

### 1.1 リポジトリ構成確認
- `pwd; ls -la`
- `rg --files`

確認結果（要点）:
- 主要コード: `src/karuku_resizer/gui_app.py`, `src/karuku_resizer/resize_core.py`
- ドキュメント: `README.md`, `docs/QUICK_START.md`, `docs/developer_guide.md`, `docs/api_reference.md`

### 1.2 エントリポイント確認
- `pyproject.toml` で次を確認
  - `karukuresize-gui = karuku_resizer.gui_app:main`
  - `karukuresize-cli = karuku_resizer.resize_core:main`

### 1.3 GUIコード確認
- `sed -n` と `rg -n` により以下を確認
  - 画像選択、プレビュー、単体保存、一括保存、進捗、キャンセル
  - 品質/形式/ドライラン/詳細ログ/EXIF編集UIは未搭載

### 1.4 CLIコード確認
- `rg -n` / `nl -ba` により以下を確認
  - ファイル内に `{{ ... }}` が残存
  - `python -m karuku_resizer.resize_core --help` で構文エラー

### 1.5 実行可否確認
- GUI: `python -m karuku_resizer.gui_app --help`
  - 失敗理由: `ModuleNotFoundError: customtkinter`
- CLI: `python -m karuku_resizer.resize_core --help`
  - 失敗理由: `SyntaxError`

## 2. 参照したローカルファイル
1. `README.md`
2. `docs/QUICK_START.md`
3. `pyproject.toml`
4. `src/karuku_resizer/gui_app.py`
5. `src/karuku_resizer/resize_core.py`
6. `docs/api_reference.md`
7. `docs/developer_guide.md`
8. `design.md`
9. `tasks.md`
10. `src/karuku_resizer/help_content.py`
11. `tests/test_basic.py`
12. `tests/legacy/test_resize_core.py`

## 3. 外部調査（短時間・一次情報中心）

### 3.1 Pillow公式ドキュメント
1. Image file formats
   - https://pillow.readthedocs.io/en/latest/handbook/image-file-formats.html
2. Features
   - https://pillow.readthedocs.io/en/latest/reference/features.html
3. ExifTags
   - https://pillow.readthedocs.io/en/stable/reference/ExifTags.html
4. Release notes 6.0.0（Exif class / PNG EXIF）
   - https://pillow.readthedocs.io/en/stable/releasenotes/6.0.0.html
5. Release notes 11.3.0（AVIF関連）
   - https://pillow.readthedocs.io/en/latest/releasenotes/11.3.0.html
6. Deprecations（WebP feature check関連）
   - https://pillow.readthedocs.io/en/stable/deprecations.html

### 3.2 Context7
- libraryId: `/python-pillow/pillow`
- 確認項目:
  - `save(exif=...)` の運用
  - `Image.getexif()` / ExifTags関連
  - `features.check('webp'/'avif')`

## 4. 調査から導いた設計判断（根拠付き）
1. 品質はUIで `5..100` `5刻み` が妥当
2. JPEGは95上限運用が実務的
3. PNGは品質値ではなく圧縮レベルに変換して扱う
4. WebP/AVIFは実行時featureチェック必須
5. EXIFは keep/remove を先行、editは限定項目から段階導入

## 5. 未確認・不確実性
1. GUIの実環境での統合挙動（依存不足で起動未確認）
2. 破損したCLIコードの本来意図
3. 一部旧ドキュメントの記述の真偽

