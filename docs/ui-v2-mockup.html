<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KarukuResize v2 — クイックモード＆詳細モード</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --bg:#0e1117;--bg1:#12161d;--bg2:#171c24;--bg3:#202835;
  --card:#1a2030;--input:#111723;--canvas:#111722;
  --t1:#e8eef5;--t2:#a7b4c4;--t3:#7e8a9a;
  --blue:#208cff;--blue-h:#3ba7ff;--blue-soft:#1e2d40;
  --brd:#2a3340;--brd2:#334155;
  --green:#3ca66a;--orange:#ef9a1a;--red:#e25a68;
  --r:12px;--rs:8px;
  --f:'Segoe UI','SF Pro Display','Hiragino Sans',sans-serif;
}
body{background:var(--bg);color:var(--t1);font:14px var(--f);min-height:100vh;}

/* Tab bar */
.tab-bar{display:flex;background:var(--bg1);border-bottom:1px solid var(--brd);position:sticky;top:0;z-index:100;}
.tab-btn{flex:1;padding:14px 0;text-align:center;font:600 14px var(--f);color:var(--t3);cursor:pointer;border:none;background:none;border-bottom:3px solid transparent;transition:.15s;}
.tab-btn:hover{color:var(--t2);background:var(--bg2);}
.tab-btn.active{color:var(--blue);border-bottom-color:var(--blue);background:var(--bg2);}
.tab-content{display:none;}
.tab-content.active{display:block;}

/* Window */
.win{background:var(--bg1);border:1px solid var(--brd);border-radius:var(--r);overflow:hidden;margin:20px auto;max-width:1100px;box-shadow:0 8px 40px rgba(0,0,0,.5);}
.win-title{background:#0a0d12;padding:8px 14px;font-size:12px;color:var(--t3);display:flex;align-items:center;gap:8px;border-bottom:1px solid var(--brd);}
.dots{display:flex;gap:6px;}
.dots span{width:11px;height:11px;border-radius:50%;}
.d-r{background:#ff5f57;}.d-y{background:#febc2e;}.d-g{background:#28c840;}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:10px 20px;border-radius:var(--rs);font:600 13px var(--f);cursor:pointer;border:none;transition:.15s;}
.btn-p{background:var(--blue);color:#fff;}
.btn-p:hover{background:var(--blue-h);}
.btn-s{background:transparent;color:var(--blue);border:1.5px solid var(--blue);}
.btn-s:hover{background:var(--blue-soft);}
.btn-t{background:transparent;color:var(--t2);border:1px solid var(--brd);}
.btn-t:hover{background:var(--bg3);color:var(--t1);}
.btn-g{background:transparent;color:var(--t3);border:none;padding:8px;}
.btn-g:hover{color:var(--t1);background:var(--bg3);border-radius:var(--rs);}
.btn-sm{padding:7px 14px;font-size:12px;}
.btn-lg{padding:14px 28px;font-size:15px;}

/* Inputs */
.sel{padding:8px 28px 8px 12px;background:var(--bg3);border:1px solid var(--brd2);border-radius:var(--rs);color:var(--t1);font:13px var(--f);appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%237E8A9A' stroke-width='2.5'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;cursor:pointer;}
.inp{padding:8px 12px;background:var(--input);border:1px solid var(--brd);border-radius:var(--rs);color:var(--t1);font:13px var(--f);}
.inp:focus{outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(32,140,255,.15);}

/* ===== QUICK MODE ===== */
.quick-container{padding:40px 32px 48px;display:flex;flex-direction:column;align-items:center;gap:24px;}
.quick-header{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:800px;}
.quick-title{font:700 20px var(--f);color:var(--t1);}
.quick-subtitle{font-size:13px;color:var(--t3);margin-top:2px;}

/* Drop zone */
.drop-zone{width:100%;max-width:800px;padding:48px 32px;border:2px dashed var(--brd2);border-radius:var(--r);background:var(--canvas);display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;transition:.2s;}
.drop-zone:hover{border-color:var(--blue);background:var(--blue-soft);}
.drop-icon{opacity:.5;color:var(--t2);}
.drop-text{font:500 16px var(--f);color:var(--t2);text-align:center;}
.drop-hint{font-size:12px;color:var(--t3);}
.current-setting{margin-top:12px;padding:10px 20px;background:var(--bg2);border-radius:var(--rs);border:1px solid var(--brd);display:flex;align-items:center;gap:8px;}
.current-setting-label{font-size:12px;color:var(--t3);}
.current-setting-value{font:500 13px var(--f);color:var(--blue);}

/* Collapsible section */
.collapsible-section{width:100%;max-width:800px;}
.collapsible-toggle{width:100%;display:flex;align-items:center;gap:10px;padding:14px 20px;background:var(--bg2);border:1px solid var(--brd);border-radius:var(--r);cursor:pointer;font:500 14px var(--f);color:var(--t1);transition:.15s;}
.collapsible-toggle:hover{background:var(--bg3);border-color:var(--brd2);}
.toggle-icon{font-size:10px;color:var(--t3);width:16px;}
.toggle-hint{margin-left:auto;font-size:11px;color:var(--t3);font-weight:400;}
.collapsible-content{padding:16px 0 0;display:block;}
.collapsible-section:not(.open) .collapsible-content{display:none;}

/* Preset cards */
.preset-check{position:absolute;top:10px;right:10px;width:22px;height:22px;background:var(--blue);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;}
.preset-card{position:relative;}
.preset-section{width:100%;max-width:800px;}
.preset-label{font:600 13px var(--f);color:var(--t2);margin-bottom:12px;}
.preset-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
.preset-card{background:var(--bg2);border:2px solid var(--brd);border-radius:var(--r);padding:20px 16px;cursor:pointer;transition:.15s;text-align:center;}
.preset-card:hover{border-color:var(--blue);background:var(--blue-soft);}
.preset-card.selected{border-color:var(--blue);background:var(--blue-soft);box-shadow:0 0 0 3px rgba(32,140,255,.2);}
.preset-icon{margin-bottom:8px;display:flex;justify-content:center;}
.preset-icon svg{width:32px;height:32px;stroke:var(--blue);stroke-width:1.5;}
.preset-name{font:600 14px var(--f);color:var(--t1);margin-bottom:4px;}
.preset-desc{font-size:12px;color:var(--t3);line-height:1.5;}
.preset-size{font-size:11px;color:var(--t3);margin-top:8px;padding-top:8px;border-top:1px solid var(--brd);}

/* Last used */
.last-used{width:100%;max-width:800px;display:flex;align-items:center;gap:12px;padding:16px 20px;background:var(--bg2);border-radius:var(--r);border:1px solid var(--brd);}
.last-used-icon{font-size:20px;color:var(--blue);}
.last-used-text{flex:1;}
.last-used-title{font:500 13px var(--f);color:var(--t1);}
.last-used-desc{font-size:11px;color:var(--t3);margin-top:2px;}

/* Quick footer */
.quick-footer{width:100%;max-width:800px;display:flex;justify-content:space-between;align-items:center;padding-top:8px;}
.output-path{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--t3);}
.output-path-label{color:var(--t2);}

/* ===== QUICK MODE: Processing state ===== */
.processing-container{padding:40px 32px;display:flex;flex-direction:column;align-items:center;gap:24px;}
.processing-header{text-align:center;}
.processing-title{font:700 18px var(--f);color:var(--t1);margin-bottom:4px;}
.processing-subtitle{font-size:13px;color:var(--t3);}
.progress-bar-container{width:100%;max-width:600px;height:8px;background:var(--bg3);border-radius:4px;overflow:hidden;}
.progress-bar{height:100%;background:linear-gradient(90deg,var(--blue),var(--blue-h));width:65%;transition:width .3s;}
.processing-stats{display:flex;gap:32px;font-size:13px;color:var(--t2);}
.stat-item{display:flex;align-items:center;gap:6px;}
.stat-icon{font-size:14px;}
.file-list-mini{width:100%;max-width:600px;background:var(--bg2);border-radius:var(--r);border:1px solid var(--brd);max-height:200px;overflow-y:auto;}
.file-item-mini{display:flex;align-items:center;gap:10px;padding:10px 14px;border-bottom:1px solid var(--brd);font-size:12px;}
.file-item-mini:last-child{border-bottom:none;}
.file-status{width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;}
.status-done{background:rgba(60,166,106,.15);color:var(--green);}
.status-processing{background:rgba(32,140,255,.15);color:var(--blue);}
.status-pending{background:var(--bg3);color:var(--t3);}
.status-failed{background:rgba(226,90,104,.15);color:var(--red);}
.file-name{flex:1;color:var(--t2);}
.file-size{color:var(--t3);}

/* ===== QUICK MODE: Complete state ===== */
.complete-container{padding:48px 32px;display:flex;flex-direction:column;align-items:center;gap:20px;}
.complete-icon{color:var(--green);}
.complete-title{font:700 22px var(--f);color:var(--t1);}
.complete-stats{display:flex;gap:24px;font-size:14px;}
.complete-stat{display:flex;align-items:center;gap:6px;padding:8px 16px;background:var(--bg2);border-radius:var(--rs);}
.complete-stat.success{color:var(--green);}
.complete-stat.failed{color:var(--red);}
.complete-actions{display:flex;gap:12px;margin-top:8px;}
.output-info{font-size:13px;color:var(--t3);margin-top:8px;}

/* ===== DETAIL MODE ===== */
.detail-toolbar{display:flex;align-items:center;gap:8px;padding:10px 14px;background:var(--card);border-bottom:1px solid var(--brd);}
.toolbar-divider{width:1px;height:28px;background:var(--brd2);margin:0 4px;}
.toolbar-group{display:flex;align-items:center;gap:6px;}
.toolbar-spacer{flex:1;}
.lbl{font-size:11px;color:var(--t3);}

.detail-chips{display:flex;gap:6px;align-items:center;padding:8px 14px;background:var(--bg2);border-bottom:1px solid var(--brd);}
.chip{display:inline-flex;align-items:center;padding:4px 12px;border-radius:12px;font:500 11px var(--f);}
.chip-d{background:var(--bg3);color:var(--t3);}
.chip-c{background:rgba(32,140,255,.12);color:var(--blue);border:1px solid rgba(32,140,255,.25);}
.chip-w{background:rgba(239,154,26,.12);color:var(--orange);border:1px solid rgba(239,154,26,.25);}

.detail-body{display:flex;height:480px;}
.detail-left{width:200px;min-width:200px;background:var(--bg2);border-right:1px solid var(--brd);display:flex;flex-direction:column;padding:10px;}
.detail-left-title{font:600 12px var(--f);color:var(--t2);padding:4px 6px 10px;}
.seg{display:inline-flex;border-radius:var(--rs);overflow:hidden;border:1px solid var(--brd2);width:100%;margin-bottom:10px;}
.seg button{flex:1;padding:6px 0;font:500 11px var(--f);background:var(--bg3);color:var(--t2);border:none;cursor:pointer;}
.seg button.on{background:var(--blue);color:#fff;}
.file-item{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:var(--rs);font-size:12px;color:var(--t2);cursor:pointer;margin-bottom:2px;}
.file-item:hover{background:var(--bg3);}
.file-item.on{background:var(--blue-soft);color:var(--blue);font-weight:500;}
.dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
.dot-g{background:var(--green);}.dot-r{background:var(--red);}.dot-u{background:var(--t3);}
.file-icon{font-size:10px;width:16px;text-align:center;}

.detail-right{flex:1;display:flex;flex-direction:column;padding:10px;gap:8px;}
.preview-row{flex:1;display:flex;gap:8px;}
.preview-box{flex:1;background:var(--canvas);border:1px solid var(--brd);border-radius:var(--r);display:flex;flex-direction:column;overflow:hidden;}
.preview-header{padding:8px 14px;font-size:12px;color:var(--t2);background:var(--card);border-bottom:1px solid var(--brd);display:flex;justify-content:space-between;align-items:center;}
.preview-header .info{font-size:11px;color:var(--t3);}
.preview-body{flex:1;display:flex;align-items:center;justify-content:center;padding:16px;background:linear-gradient(135deg,#141e2b,#0d1520);}
.img-placeholder{border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.4);}

.detail-status{padding:8px 14px;font-size:11px;color:var(--t3);background:var(--bg2);border-top:1px solid var(--brd);display:flex;justify-content:space-between;}

/* Responsive */
@media(max-width:700px){
  .preset-cards{grid-template-columns:1fr;}
  .preview-row{flex-direction:column;}
}
</style>
</head>
<body>

<!-- Tab bar -->
<div class="tab-bar">
  <button class="tab-btn active" onclick="switchTab('quick')">クイックモード</button>
  <button class="tab-btn" onclick="switchTab('quick-open')">クイック（設定展開）</button>
  <button class="tab-btn" onclick="switchTab('processing')">処理中</button>
  <button class="tab-btn" onclick="switchTab('complete')">完了</button>
  <button class="tab-btn" onclick="switchTab('detail')">詳細モード</button>
</div>

<!-- ============================================================ -->
<!-- TAB 1: QUICK MODE (Collapsed - default) -->
<!-- ============================================================ -->
<div id="tab-quick" class="tab-content active">
<div class="win">
  <div class="win-title">
    <div class="dots"><span class="d-r"></span><span class="d-y"></span><span class="d-g"></span></div>
    KarukuResize
    <div style="flex:1;"></div>
    <button class="btn btn-t btn-sm" onclick="switchTab('detail')">詳細モードへ</button>
  </div>

  <div class="quick-container">
    <!-- Header -->
    <div class="quick-header">
      <div>
        <div class="quick-title">画像をかんたんリサイズ</div>
        <div class="quick-subtitle">ドロップするだけで自動処理</div>
      </div>
      <button class="btn btn-g" title="ヘルプ"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px;"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>使い方</button>
    </div>

    <!-- Drop zone with current setting -->
    <div class="drop-zone">
      <div class="drop-icon"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg></div>
      <div class="drop-text">ここに画像をドロップ<br>またはクリックして選択</div>
      <div class="drop-hint">jpg · jpeg · png · webp · avif に対応 · 複数選択OK</div>
      <div class="current-setting">
        <span class="current-setting-label">現在の設定:</span>
        <span class="current-setting-value"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px;"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>SNS投稿用（幅1280px）</span>
      </div>
    </div>

    <!-- Collapsible preset section -->
    <div class="collapsible-section">
      <button class="collapsible-toggle" onclick="switchTab('quick-open')">
        <span class="toggle-icon">▶</span>
        <span>かんたん設定</span>
        <span class="toggle-hint">クリックで変更 · 後からでも変えられます</span>
      </button>
    </div>

    <!-- Last used -->
    <div class="last-used">
      <div class="last-used-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
      <div class="last-used-text">
        <div class="last-used-title">前回と同じ設定で処理</div>
        <div class="last-used-desc">幅 1280px · JPEG · 品質 95</div>
      </div>
      <button class="btn btn-s btn-sm">この設定を使う</button>
    </div>

    <!-- Footer -->
    <div class="quick-footer">
      <div class="output-path">
        <span class="output-path-label">保存先:</span>
        <span>~/Pictures/resized/</span>
        <button class="btn btn-g" style="padding:4px 8px;font-size:11px;">変更</button>
      </div>
      <button class="btn btn-t btn-sm" onclick="switchTab('detail')">詳細設定でカスタマイズ →</button>
    </div>
  </div>
</div>
</div>

<!-- ============================================================ -->
<!-- TAB 1b: QUICK MODE (Expanded) -->
<!-- ============================================================ -->
<div id="tab-quick-open" class="tab-content">
<div class="win">
  <div class="win-title">
    <div class="dots"><span class="d-r"></span><span class="d-y"></span><span class="d-g"></span></div>
    KarukuResize
    <div style="flex:1;"></div>
    <button class="btn btn-t btn-sm" onclick="switchTab('detail')">詳細モードへ</button>
  </div>

  <div class="quick-container">
    <!-- Header -->
    <div class="quick-header">
      <div>
        <div class="quick-title">画像をかんたんリサイズ</div>
        <div class="quick-subtitle">ドロップするだけで自動処理</div>
      </div>
      <button class="btn btn-g" title="ヘルプ"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px;"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>使い方</button>
    </div>

    <!-- Drop zone with current setting -->
    <div class="drop-zone">
      <div class="drop-icon"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg></div>
      <div class="drop-text">ここに画像をドロップ<br>またはクリックして選択</div>
      <div class="drop-hint">jpg · jpeg · png · webp · avif に対応 · 複数選択OK</div>
      <div class="current-setting">
        <span class="current-setting-label">現在の設定:</span>
        <span class="current-setting-value"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px;"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>SNS投稿用（幅1280px）</span>
      </div>
    </div>

    <!-- Expanded preset section -->
    <div class="collapsible-section open">
      <button class="collapsible-toggle" onclick="switchTab('quick')">
        <span class="toggle-icon">▼</span>
        <span>かんたん設定</span>
        <span class="toggle-hint">クリックで変更 · 後からでも変えられます</span>
      </button>
      <div class="collapsible-content">
        <div class="preset-cards">
          <div class="preset-card selected">
            <div class="preset-check">✓</div>
            <div class="preset-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg></div>
            <div class="preset-name">SNS投稿用</div>
            <div class="preset-desc">Instagram、Twitter、<br>Facebookに最適</div>
            <div class="preset-size">幅 1280px · 高画質</div>
          </div>
          <div class="preset-card">
            <div class="preset-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg></div>
            <div class="preset-name">メール添付用</div>
            <div class="preset-desc">メールで送りやすい<br>軽いサイズに</div>
            <div class="preset-size">幅 800px · 軽量</div>
          </div>
          <div class="preset-card">
            <div class="preset-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/></svg></div>
            <div class="preset-name">そのまま圧縮</div>
            <div class="preset-desc">サイズは変えずに<br>ファイルを軽くする</div>
            <div class="preset-size">元のサイズ · 品質維持</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Last used -->
    <div class="last-used">
      <div class="last-used-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
      <div class="last-used-text">
        <div class="last-used-title">前回と同じ設定で処理</div>
        <div class="last-used-desc">幅 1280px · JPEG · 品質 95</div>
      </div>
      <button class="btn btn-s btn-sm">この設定を使う</button>
    </div>

    <!-- Footer -->
    <div class="quick-footer">
      <div class="output-path">
        <span class="output-path-label">保存先:</span>
        <span>~/Pictures/resized/</span>
        <button class="btn btn-g" style="padding:4px 8px;font-size:11px;">変更</button>
      </div>
      <button class="btn btn-t btn-sm" onclick="switchTab('detail')">詳細設定でカスタマイズ →</button>
    </div>
  </div>
</div>
</div>

<!-- ============================================================ -->
<!-- TAB 2: QUICK MODE (Processing state) -->
<!-- ============================================================ -->
<div id="tab-processing" class="tab-content">
<div class="win">
  <div class="win-title">
    <div class="dots"><span class="d-r"></span><span class="d-y"></span><span class="d-g"></span></div>
    KarukuResize — 処理中...
  </div>

  <div class="processing-container">
    <div class="processing-header">
      <div class="processing-title">画像を処理しています...</div>
      <div class="processing-subtitle">SNS投稿用 · 幅 1280px</div>
    </div>

    <div class="progress-bar-container">
      <div class="progress-bar"></div>
    </div>

    <div class="processing-stats">
      <div class="stat-item"><span class="stat-icon">✓</span> 5枚 完了</div>
      <div class="stat-item"><span class="stat-icon" style="color:var(--blue);">⟳</span> 1枚 処理中</div>
      <div class="stat-item"><span class="stat-icon" style="color:var(--t3);">○</span> 2枚 待機中</div>
    </div>

    <div class="file-list-mini">
      <div class="file-item-mini">
        <div class="file-status status-done">✓</div>
        <div class="file-name">sunset_4k.jpg</div>
        <div class="file-size">4.2 MB → 285 KB</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-done">✓</div>
        <div class="file-name">mountain.png</div>
        <div class="file-size">3.1 MB → 198 KB</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-done">✓</div>
        <div class="file-name">portrait.jpg</div>
        <div class="file-size">2.8 MB → 156 KB</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-done">✓</div>
        <div class="file-name">flower.jpg</div>
        <div class="file-size">1.9 MB → 124 KB</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-done">✓</div>
        <div class="file-name">building.png</div>
        <div class="file-size">5.2 MB → 312 KB</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-processing">⟳</div>
        <div class="file-name">landscape.avif</div>
        <div class="file-size">処理中...</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-pending">○</div>
        <div class="file-name">beach.jpg</div>
        <div class="file-size">待機中</div>
      </div>
      <div class="file-item-mini">
        <div class="file-status status-pending">○</div>
        <div class="file-name">city.png</div>
        <div class="file-size">待機中</div>
      </div>
    </div>

    <button class="btn btn-t">キャンセル</button>
  </div>
</div>
</div>

<!-- ============================================================ -->
<!-- TAB 3: QUICK MODE (Complete state) -->
<!-- ============================================================ -->
<div id="tab-complete" class="tab-content">
<div class="win">
  <div class="win-title">
    <div class="dots"><span class="d-r"></span><span class="d-y"></span><span class="d-g"></span></div>
    KarukuResize — 完了
  </div>

  <div class="complete-container">
    <div class="complete-icon"><svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg></div>
    <div class="complete-title">処理が完了しました！</div>
    
    <div class="complete-stats">
      <div class="complete-stat success">
        <span>✓</span> 7枚 成功
      </div>
      <div class="complete-stat failed">
        <span>✗</span> 1枚 失敗
      </div>
    </div>

    <div class="output-info">
      保存先: ~/Pictures/resized/<br>
      合計サイズ: 21.2 MB → 1.4 MB（93%削減）
    </div>

    <div class="complete-actions">
      <button class="btn btn-p btn-lg"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px;"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/><path d="M12 10v6"/><path d="m9 13 3-3 3 3"/></svg>保存先を開く</button>
      <button class="btn btn-s">別の画像を処理</button>
    </div>

    <div style="margin-top:24px;width:100%;max-width:500px;">
      <div style="font:600 12px var(--f);color:var(--t2);margin-bottom:8px;">失敗した画像（クリックで再試行）</div>
      <div class="file-list-mini">
        <div class="file-item-mini" style="cursor:pointer;">
          <div class="file-status status-failed">✗</div>
          <div class="file-name">broken.webp</div>
          <div class="file-size" style="color:var(--red);">ファイルが破損しています</div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>

<!-- ============================================================ -->
<!-- TAB 4: DETAIL MODE -->
<!-- ============================================================ -->
<div id="tab-detail" class="tab-content">
<div class="win">
  <div class="win-title">
    <div class="dots"><span class="d-r"></span><span class="d-y"></span><span class="d-g"></span></div>
    KarukuResize — 詳細モード
    <div style="flex:1;"></div>
    <button class="btn btn-t btn-sm" onclick="switchTab('quick')">クイックモードへ</button>
  </div>

  <!-- Toolbar: simplified, no preview button -->
  <div class="detail-toolbar">
    <div class="toolbar-group">
      <button class="btn btn-s btn-sm">画像を選択</button>
    </div>
    <div class="toolbar-divider"></div>
    <div class="toolbar-group">
      <select class="sel">
        <option>幅 px</option>
        <option>比率 %</option>
        <option>高さ px</option>
        <option>幅×高</option>
      </select>
      <input class="inp" value="1280" style="width:70px;">
      <span class="lbl">px</span>
    </div>
    <div class="toolbar-divider"></div>
    <div class="toolbar-group">
      <!-- Single save button: auto-detects single vs batch -->
      <button class="btn btn-p btn-sm">保存（7枚）</button>
    </div>
    <div class="toolbar-spacer"></div>
    <div class="toolbar-group">
      <select class="sel" style="width:140px;">
        <option>SNS投稿用</option>
        <option>メール添付用</option>
        <option>そのまま圧縮</option>
      </select>
      <button class="btn btn-g" title="設定">⚙</button>
      <button class="btn btn-g" title="ヘルプ">?</button>
    </div>
  </div>

  <!-- Settings chips: only changed items -->
  <div class="detail-chips">
    <span class="lbl" style="margin-right:4px;">設定:</span>
    <span class="chip chip-c">品質 95</span>
    <span class="chip chip-c">WEBP</span>
    <span class="chip chip-w">ドライラン ON</span>
    <div style="flex:1;"></div>
    <span class="lbl">保存先: ~/Pictures/resized/</span>
    <button class="btn btn-g" style="padding:2px 6px;font-size:10px;">変更</button>
  </div>

  <!-- Main body -->
  <div class="detail-body">
    <!-- Left: file list -->
    <div class="detail-left">
      <div class="detail-left-title">ファイルリスト</div>
      <div class="seg">
        <button class="on">全件</button>
        <button>失敗</button>
        <button>未処理</button>
      </div>
      <div class="file-item on">
        <span class="file-icon">✓</span>
        <span class="dot dot-g"></span>
        sunset_4k.jpg
      </div>
      <div class="file-item">
        <span class="file-icon">✓</span>
        <span class="dot dot-g"></span>
        mountain.png
      </div>
      <div class="file-item">
        <span class="file-icon">○</span>
        <span class="dot dot-u"></span>
        portrait.jpg
      </div>
      <div class="file-item">
        <span class="file-icon">✗</span>
        <span class="dot dot-r"></span>
        broken.webp
      </div>
      <div class="file-item">
        <span class="file-icon">○</span>
        <span class="dot dot-u"></span>
        landscape.avif
      </div>
      <div class="file-item">
        <span class="file-icon">✓</span>
        <span class="dot dot-g"></span>
        flower.jpg
      </div>
      <div class="file-item">
        <span class="file-icon">○</span>
        <span class="dot dot-u"></span>
        building.png
      </div>
    </div>

    <!-- Right: horizontal previews (auto-updating) -->
    <div class="detail-right">
      <div class="preview-row">
        <div class="preview-box">
          <div class="preview-header">
            オリジナル
            <span class="info">3840 × 2160 · 4.2 MB</span>
          </div>
          <div class="preview-body">
            <div class="img-placeholder" style="width:200px;height:112px;background:linear-gradient(135deg,#e8a04c 0%,#c4622a 30%,#3a1a5e 70%,#1a0a3e 100%);"></div>
          </div>
        </div>
        <div class="preview-box">
          <div class="preview-header">
            リサイズ後（自動プレビュー）
            <span class="info">1280 × 720 · 285 KB <span style="color:var(--green);">(−93%)</span></span>
          </div>
          <div class="preview-body">
            <div class="img-placeholder" style="width:140px;height:79px;background:linear-gradient(135deg,#e8a04c 0%,#c4622a 30%,#3a1a5e 70%,#1a0a3e 100%);"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Status bar -->
  <div class="detail-status">
    <span>準備完了 · 7枚読込 · 3枚処理済 · 1枚失敗</span>
    <span>設定を変更すると自動でプレビューが更新されます</span>
  </div>
</div>
</div>

<script>
function switchTab(id){
  document.querySelectorAll('.tab-btn').forEach((b,i)=>{
    const ids=['quick','quick-open','processing','complete','detail'];
    b.classList.toggle('active',ids[i]===id);
  });
  document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
  document.getElementById('tab-'+id).classList.add('active');
}

// Simulate progress animation
setInterval(()=>{
  const bar=document.querySelector('.progress-bar');
  if(bar){
    let w=parseFloat(bar.style.width)||65;
    w+=Math.random()*3;
    if(w>95)w=65;
    bar.style.width=w+'%';
  }
},500);

// Preset card selection
document.querySelectorAll('.preset-card').forEach(card=>{
  card.addEventListener('click',()=>{
    document.querySelectorAll('.preset-card').forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');
  });
});
</script>
</body>
</html>
